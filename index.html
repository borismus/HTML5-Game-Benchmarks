<!DOCTYPE html>
<title>HTML5 Game Benchmarks</title>
<style>
.test .results {
    display: none;
}

.test.pass .results, .test.fail .results {
    display: block;
}

.test.pass .name {
    font-weight: bold;
    color: #008800;
}

.test.fail .name {
    font-weight: bold;
    color: #CC0000;
}

.test .error-message {
    display: none;
}

.test.error {
    font-weight: bold;
    color: #FFFFFF;
    background-color: #880000;
}

.test.error .error-message {
    display: block;
}

table thead th, table tfoot th {
    text-align: center;
    font-weight: bold;
}

table tbody th {
    text-align: left;
    font-weight: bold;
}

table {
    border-collapse: collapse;
}

table th, table td {
    border: 2px solid #CCCCCC;
    padding: 0.25em 0.5em;
}
</style>

<h1>HTML5 Game Benchmarks</h1>
<p>Basic benchmarks to measure HTML5 performance and support for game related features.<p>

<h2>Feature Tests</h2>
<p>Yes/no, sometimes subfeatures</p>
<ul>
<li>Hardware-Accelerated CSS Transforms
<li>Basic SVG
<li>SVG Fonts
<li>SVG Colour Matrices
<li>SVG Masking
<li>Audio
</ul>

<h2>Performance Tests</h2>
<p>DOM score, render score</p>
<p><button disabled id="start-performance-tests">Run Tests</button></p>

<ul>
<li id="sprites"><span class="name">Sprites</span>
    <table>
        <thead>
        <tr><th>Source type</th><th>Technique</th><th>Test type</th><th>JS time (ms)</th><th>Total time (ms)</th></tr>
        </thead>

        <tbody>
        <tr id="performance-sprites-image-scale-css2d" class="test">
            <th rowspan="8">Static <tt>&lt;img&gt;</tt></th>

            <th rowspan="2">CSS 2D transforms with &lt;img&gt;</th>

            <th>Scale<span class="error-message"></span></th>
            <td data-property="js"></td>
            <td data-property="total"></td>
        </tr>
        <tr id="performance-sprites-image-translate-css2d" class="test">
            <th>Translate<span class="error-message"></span></th>
            <td data-property="js"></td>
            <td data-property="total"></td>
        </tr>

        <tr id="performance-sprites-image-scale-css3d" class="test">
            <th rowspan="2">CSS 3D transforms with &lt;img&gt;</th>
            <th>Scale<span class="error-message"></span></th>
            <td data-property="js"></td>
            <td data-property="total"></td>
        </tr>
        <tr id="performance-sprites-image-translate-css3d" class="test">
            <th>Translate<span class="error-message"></span></th>
            <td data-property="js"></td>
            <td data-property="total"></td>
        </tr>

        <tr id="performance-sprites-image-scale-cssWebkitMatrix" class="test">
            <th rowspan="2"><code>WebKitCSSMatrix</code> transforms with &lt;img&gt;</th>
            <th>Scale<span class="error-message"></span></th>
            <td data-property="js"></td>
            <td data-property="total"></td>
        </tr>
        <tr id="performance-sprites-image-translate-cssWebkitMatrix" class="test">
            <th>Translate<span class="error-message"></span></th>
            <td data-property="js"></td>
            <td data-property="total"></td>
        </tr>

        <tr id="performance-sprites-image-scale-canvasDrawImageFullClear" class="test">
            <th rowspan="2">Canvas <code>drawImage</code>, full clear</th>
            <th>Scale<span class="error-message"></span></th>
            <td data-property="js"></td>
            <td data-property="total"></td>
        </tr>
        <tr id="performance-sprites-image-translate-canvasDrawImageFullClear" class="test">
            <th>Translate<span class="error-message"></span></th>
            <td data-property="js"></td>
            <td data-property="total"></td>
        </tr>
        </tbody>
    </table>
<li id="performance-audioLatency" class="test"><span class="name">Audio latency</span>
    <ul class="results">
    <li>Cold play latency: <span data-property="coldLatency"></span>ms
    <li>Warm play latency: <span data-property="warmLatency"></span>ms
    </ul>
</ul>

<script>
(function () {
    var onLoadFunctions = [ ];
    var loaded = false;

    function registerOnLoad(fn) {
        if (loaded) {
            setTimeout(fn, 0);
        } else {
            onLoadFunctions.push(fn);
        }
    }

    window.addEventListener('load', function () {
        while (onLoadFunctions.length) {
            var fn = onLoadFunctions.shift();
            setTimeout(fn, 0);
        }
    }, false);

    window.registerOnLoad = registerOnLoad;
}());
</script>

<script src="js/unrequire.js"></script>
<script>require({ baseUrl: 'js' }, [ 'index' ]);</script>
